Memoria practica 3 Administración de sistemas:
Bara Lles, Héctor; NIA: 778097
Domínguez Nogueras, Pablo; NIA: 777093
Al inicio de la práctica comenzamos con una idea inicial que no ha cambiado a lo largo del desarrollo total de la misma, que consiste en separar el script en 4 apartados. 1- Invocación con 2 parámetros, 2- Añadir usuarios (-a), 3- Eliminar usuarios (-s), 4- Invocación con parámetro erróneo.
Con la implementación del apartado de añadir usuarios realizamos varios cambios durante la práctica, antes de introducir el cut pensamos en separar los parámetros del fichero con grep (cut es más seguro para este caso y así no tenemos que modificar los IFS). También realizábamos un if para comprobar si el ID del usuario que usaba el script era superior a 1815, pero a la hora de realizar los test observamos que habíamos entendido mal el significado del id y que simplemente teníamos que poner el mínimo mediante un flag de useradd (-K UID_MIN=1815). Cuando intentamos copiar el contenido del directorio skel al directorio home del usuario lo hicimos con cp pero nos copiaba también el directorio skel así que en otra revisión de los flags nos dimos cuenta que se podía hacer con el flag –k. Con la parte de añadir usuarios ya acabada nos dimos cuenta que no habíamos usado usermod y este era requisito necesario por lo que retiramos de useradd el flag de –f y se lo añadimos a usermod, ya que ambos hacen lo mismo (dar una fecha de caducidad a la contraseña del usuario).
En el momento de introducir el borrado de usuarios fue el más problemático, ya que no podíamos introducir en tar la dirección destino correcta de la carpeta que contenía el directorio home del usuario, ya que el script no realizaba correctamente la expansión de la tilde; por ello decidimos utilizar el grep en passwd para obtener la línea que contenía la información del usuario y después obtener el directorio con cut como ya hicimos anteriormente. Por último añadir que a la hora de utilizar userdel nos dimos cuenta de que una opción mejor y más efectiva hubiera sido usar deluser ya que este comando cuenta con los flags necesarios para comprimir el archivo que se solicite y guardar una copia de seguridad en el directorio que se estime oportuno, pero no la utilizamos ya que hay algunas distribuciones de Linux que no cuentan con el de manera predeterminada y entonces el script podría fallar.
(Todos los comandos del script están comentados por si hay alguna duda de por qué se han utilizado, aunque consideramos que en esta memoria está recogido lo más importante)
